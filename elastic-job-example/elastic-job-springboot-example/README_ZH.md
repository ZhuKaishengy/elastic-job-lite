# mapbar-elastic-job
## 整合springboot的深度定制版
***
### 长期规划功能
#### 1.1 支持动态创建任务
    1.1.1 对外提供创建任务的接口
    1.1.2 一个任务所创建的对象全部由spring来管理
    1.1.3 提供两种监听器，监听任务的执行流程
    1.1.4 除了支持cron表达式，还要支持simple类型任务的创建，同时任务执行完要销毁
    1.1.5 提供多种创建任务的方式，除了接口，还有feign、rpc用于服务间调用，
    rabbitmq、kafaka用于异步调用
    1.1.6 提供多种简单任务的模版，比如任务是要调用一个接口或怎样，满足不同业务要求
    1.1.7 服务重启，从zk中读取任务，创建
#### 1.2 支持动态销毁任务
    1.2.1 对外提供销毁任务的接口
    1.2.2 销毁任务后，任务所创建的对象从spring中移除
#### 1.3 支持任务的管理
    1.3.1 完善现有的console的功能，看看是否有优化空间

***
### 当前版本已完成功能(未测试)
#### 1.1 支持动态创建任务
    1.1.1 对外提供创建任务的接口
    1.1.2 一个任务所创建的对象全部由spring来管理
    1.1.3 提供两种监听器，监听任务的执行流程
    1.1.4 除了支持cron表达式，还要支持simple类型任务的创建，同时任务执行完要销毁（未加入销毁逻辑）
#### 1.2 支持动态销毁任务
    1.2.1 对外提供销毁任务的接口
    1.2.2 销毁任务后，任务所创建的对象从spring中移除
***

### 当前版本已完成功能
#### 1.1 对上一个版本完成测试
    1.1.1 启动多节点，模拟集群启动，创建cron任务和simple任务，包括单个分片和多个分片，看是否正确执行
    1.1.2 查看监听器是否正确执行
    1.1.3 关闭一个节点，模拟故障，查看是否进行失效转移
    1.1.4 销毁任务，查看是否正确执行

#### 1.2 新解决的问题
    1.2.1 现有逻辑，任务分为几个状态，正常、失效、终止，删除，simple任务执行完成，worker线程没有销毁，高并发任务的创建，系统中wait线程越来越多，cpu占用过高
